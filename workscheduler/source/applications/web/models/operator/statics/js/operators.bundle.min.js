!function(e){function t(t){for(var r,l,i=t[0],s=t[1],c=t[2],d=0,u=[];d<i.length;d++)l=i[d],n[l]&&u.push(n[l][0]),n[l]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(p&&p(t);u.length;)u.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,i=1;i<a.length;i++){var s=a[i];0!==n[s]&&(r=!1)}r&&(o.splice(t--,1),e=l(l.s=a[0]))}return e}var r={},n={2:0},o=[];function l(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=r,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(a,r,function(t){return e[t]}.bind(null,r));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var i=window.webpackJsonp=window.webpackJsonp||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var p=s;o.push([635,0]),a()}({15:function(e,t,a){"use strict";var r=a(10),n=a(29),o=a.n(n),l=a(26),i=a.n(l);const s=Object(r.createMuiTheme)({palette:{primary:o.a,secondary:i.a},typography:{useNextVariants:!0}});t.a=s},16:function(e,t,a){"use strict";a.d(t,"a",function(){return r});class r{constructor(e){this.id=e}append(e,t){let a=$(this.id),r=$("<div>").addClass(`alert ${t} alert-dismissible fade show`).append($("<button>").addClass("close").attr({type:"button","data-dismiss":"alert"}).html("&times;"));r.append(e),a.append(r)}}},635:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(11),l=a(14),i=a(7);var s=(e={isOpen:!1},t)=>{switch(t.type){case"OPEN_DIALOG_EDIT":return{...e,isOpen:!0,id:t.operator.id,name:t.operator.user.name,affiliation:t.operator.user.affiliation.name,skills:t.operator.skills,ojt:t.operator.ojt};case"CLOSE_DIALOG":return{...e,isOpen:!1};case"CHANGE_SKILL":const a=e.skills.map(e=>e.id);return{...e,skills:a.includes(t.skill.id)?e.skills.filter(e=>e.id!=t.skill.id):e.skills.concat(t.skill)};case"CHANGE_OJT":return{...e,ojt:t.operator};default:return e}};var c=(e=[],t)=>{switch(t.type){case"EDIT_OPERATOR":return e.map(e=>e.id!=t.operator.id?e:t.operator);default:return e}},p=Object(l.c)({operatorDialog:s,operators:c}),d=a(10),u=a(15),m=a(30),f=a.n(m),h=a(16);var E=a(19),y=a.n(E),v=a(22),O=a.n(v),b=a(179),g=a.n(b),k=a(190),j=a.n(k),C=a(180),S=a.n(C),_=a(189),w=a.n(_),D=a(50),T=a.n(D),N=a(45),x=a.n(N),I=a(183),L=a.n(I),P=a(249),A=a.n(P),G=a(212),J=a.n(G),$=a(250),M=a.n($),H=a(49),R=a.n(H),q=a(43),W=a.n(q);var F=({skill:e,checked:t,onChange:a})=>n.a.createElement(R.a,{label:e.name,control:n.a.createElement(W.a,{checked:t,onChange:a,value:e.id})});const K=document.querySelector('script[src*="operators"]').dataset,B=JSON.parse(K.skills);var V=({operatorSkills:e,onChange:t})=>{const a=e.map(e=>e.id),r=[];for(let e of B.filter(e=>!e.isCertified))r.push(n.a.createElement(F,{key:e.id,skill:e,checked:a.includes(e.id),onChange:()=>t(e)}));return n.a.createElement(L.a,{style:{display:"inherit"},margin:"dense",className:"mt-3"},n.a.createElement(M.a,{component:"legend"},"not certified skills"),n.a.createElement(J.a,{row:!0},r))};const X=document.querySelector('script[src*="operators"]').dataset,Y=JSON.parse(X.operators);var z=({operatorDialog:e,onSkillChange:t,onOjtChange:a,handleClose:r,handleSave:o})=>{const l=[n.a.createElement(x.a,{key:"none",value:""})];for(let t of Y.filter(t=>t.id!=e.id))l.push(n.a.createElement(x.a,{key:t.id,value:t},t.user.name));let i=e.ojt||"";return i&&Y.map(e=>e.id).includes(i.id)&&(i=Y.find(e=>e.id==i.id)),n.a.createElement(g.a,{open:e.isOpen,"aria-labelledby":"operator-store",maxWidth:"lg"},n.a.createElement(S.a,null,"register operator"),n.a.createElement(w.a,null,n.a.createElement(O.a,{disabled:!0,value:e.name,label:"name",fullWidth:!0,margin:"dense"}),n.a.createElement(O.a,{disabled:!0,value:e.affiliation,label:"affiliation",fullWidth:!0,margin:"dense"}),n.a.createElement(V,{operatorSkills:e.skills,onChange:t}),n.a.createElement(L.a,{fullWidth:!0},n.a.createElement(A.a,{htmlFor:"ojt"},"supervisor(ojt)"),n.a.createElement(T.a,{value:i,onChange:a,inputProps:{id:"ojt"}},l))),n.a.createElement(j.a,null,n.a.createElement(y.a,{onClick:r,color:"default"},"Close"),n.a.createElement(y.a,{onClick:()=>o(e),color:"primary",variant:"outlined"},"Save")))};const Q=document.querySelector('script[src*="operators"]').dataset.url;var U=Object(i.b)(e=>({operatorDialog:e.operatorDialog}),e=>({onSkillChange:t=>e((e=>({type:"CHANGE_SKILL",skill:e}))(t)),onOjtChange:t=>e((e=>({type:"CHANGE_OJT",operator:e}))(t.target.value)),handleClose:()=>e({type:"CLOSE_DIALOG"}),handleSave:t=>{f.a.post(Q.replace("operator_id",t.id)).send(t).set("X-CSRFToken",csrfToken).then(t=>{new h.a("#alertContainer").append("operator was successfully stored.","alert-info"),e({type:"CLOSE_DIALOG"}),e((e=>({type:"EDIT_OPERATOR",operator:e}))(JSON.parse(t.text)))}).catch(e=>{const t=JSON.parse(e.response.text),a=new h.a("#alertContainer"),r=t.errorMessage||"we have some trouble with appending skill...";a.append(`Oops, Sorry... ${r}`,"alert-danger")})}}))(z),Z=a(186),ee=a.n(Z),te=a(187),ae=a.n(te),re=a(21),ne=a.n(re),oe=a(41),le=a.n(oe),ie=a(3),se=a(38),ce=a.n(se),pe=a(37),de=a.n(pe);var ue=({operator:e,handleEdit:t})=>{let a=e.ojt||"";return a&&(a=`${a.user.name}`),Object(ie.b)(ce.a,{button:!0,onClick:t,css:ie.a`
            div { flex: 1; }
        `},Object(ie.b)(de.a,{primary:e.user.name,secondary:`main team: ${e.user.affiliation.name}`}),Object(ie.b)(de.a,{primary:"Skills",secondary:`${e.skills.map(e=>e.name+" ")}`}),a&&Object(ie.b)(de.a,{primary:"Ojt",secondary:`${a}`}))};var me=({operators:e,handleEdit:t})=>{const a=e.map(e=>n.a.createElement(ue,{key:e.id,operator:e,handleEdit:()=>t(e)}));return n.a.createElement(le.a,{style:{maxHeight:"76vh",overflowY:"auto"}},a)};var fe=({...e})=>n.a.createElement("div",null,n.a.createElement(ee.a,{position:"static",color:"default"},n.a.createElement(ae.a,null,n.a.createElement(ne.a,{variant:"title",color:"inherit",style:{flexGrow:1}},"operators"))),n.a.createElement(me,e));var he=Object(i.b)(e=>({operators:e.operators}),e=>({handleEdit:t=>e((e=>({type:"OPEN_DIALOG_EDIT",operator:e}))(t))}))(fe);var Ee=()=>n.a.createElement(n.a.Fragment,null,n.a.createElement(U,null),n.a.createElement(he,null));const ye=document.querySelector('script[src*="operators"]').dataset,ve=JSON.parse(ye.operators),Oe=Object(l.e)(p,{operators:ve,operatorDialog:{isOpen:!1}});Object(o.render)(n.a.createElement(d.MuiThemeProvider,{theme:u.a},n.a.createElement(i.a,{store:Oe},n.a.createElement(Ee,null))),document.getElementById("root"))}});
//# sourceMappingURL=operators.bundle.min.js.map