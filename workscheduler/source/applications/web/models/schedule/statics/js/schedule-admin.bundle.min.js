!function(e){function t(t){for(var s,o,i=t[0],c=t[1],l=t[2],d=0,j=[];d<i.length;d++)o=i[d],n[o]&&j.push(n[o][0]),n[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);for(u&&u(t);j.length;)j.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(s=!1)}s&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},n={4:0},r=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;r.push([643,0]),a()}({16:function(e,t,a){"use strict";var s=a(10),n=a(30),r=a.n(n),o=a(26),i=a.n(o);const c=Object(s.createMuiTheme)({palette:{primary:r.a,secondary:i.a},typography:{useNextVariants:!0}});t.a=c},185:function(e,t,a){"use strict";var s=a(0),n=a.n(s),r=a(36),o=a.n(r),i=a(3);const c={minWidth:"7rem",maxWidth:"7rem",padding:"1rem",position:"sticky",left:0,background:"white",zIndex:99,fontWeight:"initial"};t.a=n.a.memo(({val:e,left:t})=>Object(i.b)(o.a,{component:"th",scope:"row",css:Object(i.a)({...c,left:t?7+5*(t-1)+"rem":"0",minWidth:t?"5rem":"7rem",maxWidth:t?"5rem":"7rem",textAlign:t?"center":"left"})},e))},207:function(e,t,a){"use strict";var s=a(0),n=a.n(s),r=a(36),o=a.n(r),i=a(3);const c=Object(i.a)({minWidth:"5rem",maxWidth:"5rem",padding:"1rem",verticalAlign:"middle",textAlign:"center"});t.a=n.a.memo(({name:e,day:t,isHoliday:a})=>{const s=Object(i.a)(((e,t)=>"Sun"==e?{color:"red"}:"Sat"==e?{color:"deepskyblue"}:t?{color:"orangered"}:{})(e,a));return Object(i.b)(o.a,{css:c},Object(i.b)("span",{css:s},e),Object(i.b)("br",null),Object(i.b)("span",null,t))})},221:function(e,t,a){var s={"./af":53,"./af.js":53,"./ar":54,"./ar-dz":55,"./ar-dz.js":55,"./ar-kw":56,"./ar-kw.js":56,"./ar-ly":57,"./ar-ly.js":57,"./ar-ma":58,"./ar-ma.js":58,"./ar-sa":59,"./ar-sa.js":59,"./ar-tn":60,"./ar-tn.js":60,"./ar.js":54,"./az":61,"./az.js":61,"./be":62,"./be.js":62,"./bg":63,"./bg.js":63,"./bm":64,"./bm.js":64,"./bn":65,"./bn.js":65,"./bo":66,"./bo.js":66,"./br":67,"./br.js":67,"./bs":68,"./bs.js":68,"./ca":69,"./ca.js":69,"./cs":70,"./cs.js":70,"./cv":71,"./cv.js":71,"./cy":72,"./cy.js":72,"./da":73,"./da.js":73,"./de":74,"./de-at":75,"./de-at.js":75,"./de-ch":76,"./de-ch.js":76,"./de.js":74,"./dv":77,"./dv.js":77,"./el":78,"./el.js":78,"./en-SG":79,"./en-SG.js":79,"./en-au":80,"./en-au.js":80,"./en-ca":81,"./en-ca.js":81,"./en-gb":82,"./en-gb.js":82,"./en-ie":83,"./en-ie.js":83,"./en-il":84,"./en-il.js":84,"./en-nz":85,"./en-nz.js":85,"./eo":86,"./eo.js":86,"./es":87,"./es-do":88,"./es-do.js":88,"./es-us":89,"./es-us.js":89,"./es.js":87,"./et":90,"./et.js":90,"./eu":91,"./eu.js":91,"./fa":92,"./fa.js":92,"./fi":93,"./fi.js":93,"./fo":94,"./fo.js":94,"./fr":95,"./fr-ca":96,"./fr-ca.js":96,"./fr-ch":97,"./fr-ch.js":97,"./fr.js":95,"./fy":98,"./fy.js":98,"./ga":99,"./ga.js":99,"./gd":100,"./gd.js":100,"./gl":101,"./gl.js":101,"./gom-latn":102,"./gom-latn.js":102,"./gu":103,"./gu.js":103,"./he":104,"./he.js":104,"./hi":105,"./hi.js":105,"./hr":106,"./hr.js":106,"./hu":107,"./hu.js":107,"./hy-am":108,"./hy-am.js":108,"./id":109,"./id.js":109,"./is":110,"./is.js":110,"./it":111,"./it-ch":112,"./it-ch.js":112,"./it.js":111,"./ja":113,"./ja.js":113,"./jv":114,"./jv.js":114,"./ka":115,"./ka.js":115,"./kk":116,"./kk.js":116,"./km":117,"./km.js":117,"./kn":118,"./kn.js":118,"./ko":119,"./ko.js":119,"./ku":120,"./ku.js":120,"./ky":121,"./ky.js":121,"./lb":122,"./lb.js":122,"./lo":123,"./lo.js":123,"./lt":124,"./lt.js":124,"./lv":125,"./lv.js":125,"./me":126,"./me.js":126,"./mi":127,"./mi.js":127,"./mk":128,"./mk.js":128,"./ml":129,"./ml.js":129,"./mn":130,"./mn.js":130,"./mr":131,"./mr.js":131,"./ms":132,"./ms-my":133,"./ms-my.js":133,"./ms.js":132,"./mt":134,"./mt.js":134,"./my":135,"./my.js":135,"./nb":136,"./nb.js":136,"./ne":137,"./ne.js":137,"./nl":138,"./nl-be":139,"./nl-be.js":139,"./nl.js":138,"./nn":140,"./nn.js":140,"./pa-in":141,"./pa-in.js":141,"./pl":142,"./pl.js":142,"./pt":143,"./pt-br":144,"./pt-br.js":144,"./pt.js":143,"./ro":145,"./ro.js":145,"./ru":146,"./ru.js":146,"./sd":147,"./sd.js":147,"./se":148,"./se.js":148,"./si":149,"./si.js":149,"./sk":150,"./sk.js":150,"./sl":151,"./sl.js":151,"./sq":152,"./sq.js":152,"./sr":153,"./sr-cyrl":154,"./sr-cyrl.js":154,"./sr.js":153,"./ss":155,"./ss.js":155,"./sv":156,"./sv.js":156,"./sw":157,"./sw.js":157,"./ta":158,"./ta.js":158,"./te":159,"./te.js":159,"./tet":160,"./tet.js":160,"./tg":161,"./tg.js":161,"./th":162,"./th.js":162,"./tl-ph":163,"./tl-ph.js":163,"./tlh":164,"./tlh.js":164,"./tr":165,"./tr.js":165,"./tzl":166,"./tzl.js":166,"./tzm":167,"./tzm-latn":168,"./tzm-latn.js":168,"./tzm.js":167,"./ug-cn":169,"./ug-cn.js":169,"./uk":170,"./uk.js":170,"./ur":171,"./ur.js":171,"./uz":172,"./uz-latn":173,"./uz-latn.js":173,"./uz.js":172,"./vi":174,"./vi.js":174,"./x-pseudo":175,"./x-pseudo.js":175,"./yo":176,"./yo.js":176,"./zh-cn":177,"./zh-cn.js":177,"./zh-hk":178,"./zh-hk.js":178,"./zh-tw":179,"./zh-tw.js":179};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id=221},253:function(e,t,a){"use strict";var s=a(0),n=a.n(s),r=a(20),o=a.n(r),i=a(233),c=a.n(i),l=a(206),u=a.n(l),d=a(182),j=a.n(d),h=a(232),m=a.n(h),f=(a(227),a(4)),b=a.n(f),p=a(3);t.a=(({scheduleOf:e,affiliation:t,onMonthChange:a})=>{const s=Object(p.b)(m.a,null),r=b()(e,"YYYY-MM");return Object(p.b)(n.a.Fragment,null,Object(p.b)(o.a,{variant:"h4",css:p.a`
                    float: right;
                    margin: 0.5rem 1rem;
                `},r.format("YYYY-MM")),Object(p.b)(j.a,{animation:"slide-up",calendar:s,style:{zIndex:1500},value:r,onChange:e=>a(t,e)},({value:e})=>Object(p.b)(c.a,{color:"primary",css:p.a`
                                float: right;
                                z-index: 9999;
                            `},Object(p.b)(u.a,null))))})},254:function(e,t,a){"use strict";var s=a(0),n=a.n(s),r=a(36),o=a.n(r),i=a(3);const c={minWidth:"5rem",maxWidth:"5rem",padding:"1rem",textAlign:"center"};t.a=n.a.memo(({count:e,category:t,daySetting:a})=>{const[s,r]=n.a.useState({css:{}});return n.a.useMemo(()=>{const s=((e,t,a)=>{if(e>(a.isHoliday?t.holidayMax:t.weekDayMax))return"deepskyblue";const s=a.details.find(e=>e.workCategory.id==t.id);return e>s.require?"greenyellow":e<s.require?"red":""})(e,t,a);r({css:s?{...c,color:s}:c})},[e,t]),Object(i.b)(o.a,{css:Object(i.a)(s)},e)})},255:function(e,t,a){"use strict";a(0);var s=a(235),n=a.n(s),r=a(45),o=a.n(r),i=a(3),c=a(207),l=a(185);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}const d=Object(i.a)({position:"sticky",top:0,background:"white",zIndex:999});t.a=(({headers:e,cells:t})=>Object(i.b)(n.a,null,Object(i.b)(o.a,{css:d},e.map((e,t)=>Object(i.b)(l.a,{key:t,val:e,left:t})),t.map((e,t)=>Object(i.b)(c.a,u({key:t},e))))))},48:function(e,t,a){"use strict";a.d(t,"a",function(){return s});const s=(...e)=>{const t=Math.min(...e.map(e=>e.length));return Array.from({length:t},(t,a)=>e.map(e=>e[a]))}},643:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(11),o=a(14),i=a(229),c=a(7);const l=Symbol(),u=Symbol(),d=Symbol(),j=Symbol();var h=(e={},t)=>{const a=t.payload;switch(t.type){case u:return{...e,daySettings:a.daySettings,schedules:a.schedules,totals:a.totals,isPublished:a.isPublished};case j:return{...e,scheduleOf:a.scheduleOf};case"CHANGE_WORK_CATEGORY":const s=e.schedules.find(e=>e.operator.id==t.operator.id).schedule.find(e=>e.day==t.day).name;return s==t.category?e:(t.workCategories.find(e=>e.title==s),t.workCategories.find(e=>e.title==t.category),{...e,schedules:e.schedules.map(e=>e.operator.id!=t.operator.id?e:{...e,totals:e.totals.map(e=>e.workCategory.title==t.category?{...e,total:e.total+1}:e.workCategory.title==s?{...e,total:e.total-1}:e),schedule:e.schedule.map(e=>e.day!=t.day?e:{...e,name:t.category})}),totals:e.totals.map(e=>e.workCategory.title==t.category?{...e,totals:e.totals.map(e=>{if(e.day!=t.day)return e;const a=e.count+1;return{...e,count:a}})}:e.workCategory.title==s?{...e,totals:e.totals.map(e=>{if(e.day!=t.day)return e;const a=e.count-1;return{...e,count:a}})}:e)});default:return e}};const m=Symbol();var f=(e={},t)=>{const a=t.payload;switch(t.type){case m:return{...e,affiliation:a.affiliation};default:return e}};var b=(e={},t)=>{switch(t.type){case l:return{...e,isLoading:!0};case u:return{...e,isLoading:!1};default:return e}};const p=document.querySelector('script[id="base-schedule"]').dataset,y={affiliation:JSON.parse(p.affiliation)};var g=Object(o.c)({schedules:h,affiliations:f,ui:b});const O={daySettings:[],schedules:[],totals:[],scheduleOf:(new Date).toYearMonthFormatString()};Object(o.c)({schedules:h});var v=a(39);const k=(e,t)=>({type:l,payload:{affiliation:e,scheduleOf:t}}),w=e=>({type:u,payload:e}),C=e=>({type:d,error:e});var S=a(27),x=a.n(S);const z=e=>{const{affiliation:t,scheduleOf:a}=e;return x.a.get("/api/schedules").send({"affiliation-id":t.id}).send({"schedule-of":a}).set("X-CSRFToken",csrfToken).then(e=>JSON.parse(e.text)).then(e=>({res:e})).catch(e=>({error:e}))};function*M(e){const{res:t,error:a}=yield Object(v.b)(z,e.payload);t&&!a?yield Object(v.d)(w(t)):yield Object(v.d)(C(a))}function*E(){yield Object(v.e)(l,M)}var P=a(10),W=a(16),A=a(253);var T=Object(c.b)(e=>({affiliation:e.affiliations.affiliation,scheduleOf:e.schedules.scheduleOf}),e=>({onMonthChange:(t,a)=>{const s=a.toDate().toYearMonthFormatString();e(k(t,s)),e((e=>({type:j,payload:{scheduleOf:e}}))(s))}}))(A.a);var N=a(51),Y=a.n(N),_=a(46),L=a.n(_),F=a(20),H=a.n(F),q=a(250),I=a.n(q),J=a(3);const R=document.querySelector('script[src*="schedule-admin"]').dataset;var D=({affiliation:e,scheduleOf:t,onAffiliationChange:a})=>{const s=JSON.parse(R.affiliations),n=s.map(e=>Object(J.b)(L.a,{key:e.id,value:e},Object(J.b)(H.a,{variant:"h5",css:J.a`
                    color: lightslategray !important;
                `},e.name)));return s.map(e=>e.id).includes(e.id)&&(e=s.find(t=>t.id==e.id)),Object(J.b)(Y.a,{value:e,fullWidth:!0,className:"m-2",input:Object(J.b)(I.a,{labelWidth:0,onChange:e=>a(t,e)})},n)};var G=Object(c.b)(e=>({affiliation:e.affiliations.affiliation,scheduleOf:e.schedules.scheduleOf}),e=>({onAffiliationChange:(t,a)=>{const s=a.target.value;e(k(s,t)),e((e=>({type:m,payload:{affiliation:e}}))(s))}}))(D),X=a(236),K=a.n(X),U=a(234),$=a.n(U),B=a(389),V=a.n(B),Q=a(255),Z=a(45),ee=a.n(Z),te=a(185),ae=a(36),se=a.n(ae),ne=a(48);const re=Object(J.a)({minWidth:"6rem",maxWidth:"6rem",padding:"1rem",textAlign:"center"});var oe=n.a.memo(({categories:e,val:t,onCategoryChange:a})=>{const s=e.map((e,t)=>Object(J.b)(L.a,{key:t,value:e},e));return Object(J.b)(se.a,{css:re},Object(J.b)(Y.a,{value:t,onChange:a,css:J.a`
                    min-width: 5rem;
                    max-width: 5rem;
            `},s))},(e,t)=>Object(ne.a)(e.categories,t.categories).some(([e,t])=>e==t)&&e.val==t.val);var ie=n.a.memo(({headers:e,cells:t,onCategoryChange:a})=>Object(J.b)(ee.a,null,e.map((e,t)=>Object(J.b)(te.a,{key:t,val:e,left:t})),t.map(([e,t,s],n)=>Object(J.b)(oe,{key:n,val:e.name,categories:t,onCategoryChange:a(e.day,s)})))),ce=a(388),le=a.n(ce),ue=a(254);function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}const je={position:"sticky",background:"white",zIndex:99,minHeight:"3rem",maxHeight:"3rem"};var he=n.a.memo(({headers:e,cells:t,bottom:a})=>Object(J.b)(ee.a,{css:Object(J.a)({...je,bottom:3.5*a+"rem"})},e.map((e,t)=>Object(J.b)(te.a,{key:t,val:e,left:t})),t.map((e,t)=>Object(J.b)(ue.a,de({key:t},e)))),(e,t)=>Object(ne.a)(e.cells,t.cells).some(([e,t])=>e==t)&&Object(ne.a)(e.headers,t.headers).some(([e,t])=>e==t));function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}var fe=({rows:e})=>{const t=e.length;return n.a.createElement(le.a,null,e.map((e,a)=>n.a.createElement(he,me({key:a},e,{bottom:t-a-1}))))};function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}const pe=Object(J.a)({overflow:"auto",height:"64vh",width:"95vw",display:"block",borderCollapse:"initial"});var ye=class extends n.a.Component{constructor(e){super(e),this.state={workCategories:[]},x.a.get(`/api/scheduler?affiliation-id=${e.affiliation.id}`).set("X-CSRFToken",csrfToken).then(e=>{const t=JSON.parse(e.text);this.setState({workCategories:t.workCategories})})}componentDidMount(){const{affiliation:e,scheduleOf:t}=this.props;this.props.onLoad(e,t)}render(){const{daySettings:e,schedules:t,totals:a,isLoading:s,onCategoryChange:n}=this.props;if(s)return Object(J.b)(V.a,{variant:"query",css:J.a`margin: 10rem`});if(0==t.length)return Object(J.b)(H.a,{variant:"h5",css:J.a`margin: 10rem`},"Sorry, this month is not create yet...");const r=e.map(e=>[""].concat(e.details.map(e=>e.workCategory.title)).concat(["-"]).concat(e.fixedSchedules.map(e=>e.title))),o={headers:[""].concat(this.state.workCategories.map(e=>e.title).concat(["-",""])),cells:e.map(e=>({name:e.dayName,day:e.day,isHoliday:e.isHoliday}))},i=t.map(t=>({headers:[t.operator.user.name].concat(t.totals.map(e=>e.total)),cells:Object(ne.a)(t.schedule,r,e),onCategoryChange:n(this.state.workCategories,t.operator)})),c=a.map((t,a)=>({headers:[t.workCategory.title].concat(this.state.workCategories.map(e=>"").concat(["",""])),cells:Object(ne.a)(t.totals,e).map(([e,a])=>({category:t.workCategory,daySetting:a,...e}))}));return Object(J.b)(K.a,{css:pe},Object(J.b)(Q.a,o),Object(J.b)($.a,null,i.map((e,t)=>Object(J.b)(ie,be({key:t},e)))),Object(J.b)(fe,{rows:c}))}};var ge=Object(c.b)(e=>({daySettings:e.schedules.daySettings,schedules:e.schedules.schedules,totals:e.schedules.totals,affiliation:e.affiliations.affiliation,scheduleOf:e.schedules.scheduleOf,isLoading:e.ui.isLoading}),e=>({onLoad:(t,a)=>{e(k(t,a))},onCategoryChange:(t,a)=>(s,n)=>r=>{const o=r.target.value;e(((e,t,a,s,n)=>({type:"CHANGE_WORK_CATEGORY",operator:e,day:t,daySetting:a,category:s,workCategories:n}))(a,s,n,o,t))}}))(ye),Oe=a(21),ve=a.n(Oe);var ke=class extends n.a.Component{handlePublish(){x.a.post(url).send({scheduleId:scheduleId}).set("X-CSRFToken",csrfToken).then(e=>{new AlertManager("#alertContainer").append("we succeeded to store monthly setting. if you can public this calendar to operators, please click public calendar button.","alert-info")}).catch(e=>{const t=JSON.parse(e.response.text),a=new AlertManager("#alertContainer"),s=t.errorMessage||"we have some trouble with storing monthly setting...";a.append(`Oops, Sorry... ${s}`,"alert-danger")})}handleStop(){}render(){return Object(J.b)("div",{css:J.a`
                color: lightslategray !important;
                margin-top: 1rem;
            `},Object(J.b)(H.a,{variant:"h5",css:J.a`
                    float: left;
                `},"This schedule is ","published","."),Object(J.b)("div",{css:J.a`
                    float: right;
                `},Object(J.b)(ve.a,{onClick:this.handlePublish,variant:"outlined",color:"default",size:"large",css:J.a`
                        margin-right: 1rem;
                    `},"Publish"),Object(J.b)(ve.a,{onClick:this.handleStop,color:"default",size:"large",css:J.a`
                        margin-right: 1rem;
                    `},"Stop")))}};var we=()=>n.a.createElement(n.a.Fragment,null,n.a.createElement(G,null),n.a.createElement(T,null),n.a.createElement(ge,null),n.a.createElement(ke,null));const Ce=Object(i.a)(),Se=Object(o.e)(g,{schedules:O,affiliations:y,ui:{isLoading:!0}},Object(o.a)(Ce));Ce.run(function*(){yield Object(v.c)(E)}),Object(r.render)(n.a.createElement(P.MuiThemeProvider,{theme:W.a},n.a.createElement(c.a,{store:Se},n.a.createElement(we,null))),document.getElementById("root"))}});
//# sourceMappingURL=schedule-admin.bundle.min.js.map