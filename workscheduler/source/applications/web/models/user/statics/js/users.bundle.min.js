!function(e){function a(a){for(var n,i,o=a[0],l=a[1],c=a[2],u=0,p=[];u<o.length;u++)i=o[u],r[i]&&p.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(d&&d(a);p.length;)p.shift()();return s.push.apply(s,c||[]),t()}function t(){for(var e,a=0;a<s.length;a++){for(var t=s[a],n=!0,o=1;o<t.length;o++){var l=t[o];0!==r[l]&&(n=!1)}n&&(s.splice(a--,1),e=i(i.s=t[0]))}return e}var n={},r={15:0},s=[];function i(a){if(n[a])return n[a].exports;var t=n[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=n,i.d=function(e,a,t){i.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,a){if(1&a&&(e=i(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)i.d(t,n,function(a){return e[a]}.bind(null,n));return t},i.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(a,"a",a),a},i.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},i.p="";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=a,o=o.slice();for(var c=0;c<o.length;c++)a(o[c]);var d=l;s.push([648,0]),t()}({15:function(e,a,t){"use strict";var n=t(10),r=t(29),s=t.n(r),i=t(26),o=t.n(i);const l=Object(n.createMuiTheme)({palette:{primary:s.a,secondary:o.a},typography:{useNextVariants:!0}});a.a=l},17:function(e,a,t){"use strict";t.d(a,"a",function(){return n});class n{constructor(e){this.id=e}append(e,a){let t=$(this.id),n=$("<div>").addClass(`alert ${a} alert-dismissible fade show`).append($("<button>").addClass("close").attr({type:"button","data-dismiss":"alert"}).html("&times;"));n.append(e),t.append(n)}}},648:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(11),i=t(14),o=t(7);const l=document.querySelector('script[src*="users"]').dataset,c=JSON.parse(l.affiliations);var d=(e={isOpen:!1},a)=>{switch(a.type){case"OPEN_DIALOG_APPEND":return{...e,isOpen:!0,id:"",loginId:"",name:"",affiliation:c[0],isAdmin:!1,isOperator:!1};case"OPEN_DIALOG_EDIT":return{...e,isOpen:!0,id:a.user.id,loginId:a.user.loginId,name:a.user.name,affiliation:a.user.affiliation,isAdmin:a.user.isAdmin,isOperator:a.user.isOperator};case"CLOSE_DIALOG":return{...e,isOpen:!1};case"CHANGE_LOGIN_ID":return{...e,loginId:a.text};case"CHANGE_NAME":return{...e,name:a.text};case"CHANGE_AFFILIATION":return{...e,affiliation:a.obj};case"CHANGE_IS_ADMIN":return{...e,isAdmin:a.isChecked};case"CHANGE_IS_OPERATOR":return{...e,isOperator:a.isChecked};default:return e}};var u=(e=[],a)=>{switch(a.type){case"APPEND_USER":return e.concat([a.user]);case"EDIT_USER":return e.map(e=>e.id!=a.user.id?e:a.user);case"INACTIVATE_USER":return e.map(e=>e.id!=a.id?e:{...e,isInactivated:!0});default:return e}},p=Object(i.c)({userDialog:d,users:u}),m=t(10),f=t(15),h=t(30),E=t.n(h),g=t(17);var O=t(19),y=t.n(O),v=t(22),C=t.n(v),I=t(180),A=t.n(I),N=t(191),b=t.n(N),_=t(181),S=t.n(_),w=t(190),D=t.n(w),P=t(199),k=t.n(P),G=t(50),T=t.n(G),L=t(44),x=t.n(L),j=t(51),R=t.n(j),M=t(46),F=t.n(M),H=t(251),J=t.n(H),U=t(184),q=t.n(U);const V=$('script[src*="users"]').data("affiliations");var W=({userDialog:e,onLoginIdChange:a,onNameChange:t,onAffiliationChange:n,onIsAdminChange:s,onIsOperatorChange:i,handleClose:o,handleInactivate:l,handleResetPassword:c,handleSave:d})=>{const u=V.map(e=>r.a.createElement(F.a,{key:e.id,value:e},e.name));let p=e.affiliation||"";return p&&V.map(e=>e.id).includes(p.id)&&(p=V.find(e=>e.id==p.id)),r.a.createElement(A.a,{open:e.isOpen,"aria-labelledby":"user-store",maxWidth:"lg"},r.a.createElement(S.a,null,"register user"),r.a.createElement(D.a,null,r.a.createElement(k.a,null,"automatically registered operator info after user registration if he/she is not operator."),r.a.createElement(C.a,{autoFocus:!0,margin:"dense",label:"login id",fullWidth:!0,required:!0,onChange:a,value:e.loginId}),r.a.createElement(C.a,{margin:"dense",label:"name",fullWidth:!0,required:!0,onChange:t,value:e.name}),r.a.createElement(q.a,{margin:"dense"},r.a.createElement(J.a,{htmlFor:"affiliation"},"affiliation"),r.a.createElement(R.a,{value:p,id:"affiliation",onChange:n},u)),r.a.createElement("br",null),r.a.createElement(T.a,{margin:"dense",control:r.a.createElement(x.a,{checked:e.isAdmin,onChange:s,color:"primary"}),label:"is admin"}),r.a.createElement(T.a,{margin:"dense",control:r.a.createElement(x.a,{checked:e.isOperator,onChange:i,color:"primary"}),label:"is operator"})),r.a.createElement(b.a,null,r.a.createElement(y.a,{onClick:o,color:"default",className:"mr-1"},"Close"),e.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{onClick:()=>l(e.id),variant:"outlined",color:"secondary",className:"mr-1"},"Inactivate"),r.a.createElement(y.a,{onClick:()=>c(e.id),variant:"outlined",color:"secondary",className:"mr-1"},"Reset Password")),r.a.createElement(y.a,{onClick:()=>d(e),variant:"outlined",color:"primary"},"Save")))};const X=document.querySelector('script[src*="users"]').dataset.url;var B=Object(o.b)(e=>({userDialog:e.userDialog}),e=>({onLoginIdChange:a=>e((e=>({type:"CHANGE_LOGIN_ID",text:e}))(a.target.value)),onNameChange:a=>e((e=>({type:"CHANGE_NAME",text:e}))(a.target.value)),onAffiliationChange:a=>e((e=>({type:"CHANGE_AFFILIATION",obj:e}))(a.target.value)),onIsAdminChange:a=>e((e=>({type:"CHANGE_IS_ADMIN",isChecked:e}))(a.target.checked)),onIsOperatorChange:a=>e((e=>({type:"CHANGE_IS_OPERATOR",isChecked:e}))(a.target.checked)),handleClose:()=>e({type:"CLOSE_DIALOG"}),handleInactivate:a=>{E.a.post(`${X}${a}/inactivate`).send().set("X-CSRFToken",csrfToken).then(t=>{new g.a("#alertContainer").append("user was successfully inactivated.","alert-info"),e((e=>({type:"INACTIVATE_USER",id:e}))(a))}).catch(e=>{const a=JSON.parse(e.response.text),t=new g.a("#alertContainer"),n=a.errorMessage||"we have some trouble with inactivate user...";t.append(`Oops, Sorry... ${n}`,"alert-danger")}),e({type:"CLOSE_DIALOG"})},handleResetPassword:a=>{E.a.post(`${X}${a}/reset-password`).send().set("X-CSRFToken",csrfToken).then(e=>{new g.a("#alertContainer").append("user password was successfully reset.","alert-info")}).catch(e=>{const a=JSON.parse(e.response.text),t=new g.a("#alertContainer"),n=a.errorMessage||"we have some trouble with resetting password...";t.append(`Oops, Sorry... ${n}`,"alert-danger")}),e({type:"CLOSE_DIALOG"})},handleSave:a=>{E.a.post(a.id?`${X}${a.id}`:X).send(a).set("X-CSRFToken",csrfToken).then(t=>{const n=new g.a("#alertContainer");n.append("user was successfully stored.","alert-info"),a.id?e((e=>({type:"EDIT_USER",user:e}))(JSON.parse(t.text))):(n.append("his/her password is p + his/her login id. Please change it.","alert-info"),e((e=>({type:"APPEND_USER",user:e}))(JSON.parse(t.text))))}).catch(e=>{const a=JSON.parse(e.response.text),t=new g.a("#alertContainer"),n=a.errorMessage||"we have some trouble with appending user...";t.append(`Oops, Sorry... ${n}`,"alert-danger")}),e({type:"CLOSE_DIALOG"})}}))(W),Y=t(187),z=t.n(Y),K=t(188),Q=t.n(K),Z=t(21),ee=t.n(Z),ae=t(23),te=t.n(ae),ne=t(49),re=t.n(ne),se=t(42),ie=t.n(se),oe=t(38),le=t.n(oe),ce=t(37),de=t.n(ce);var ue=({user:e,handleEdit:a})=>{const t=e.isInactivated?"inactivated":"";return r.a.createElement(le.a,{button:!0,onClick:a,className:t},r.a.createElement(de.a,{primary:e.name,secondary:`login id: ${e.loginId}, affiliation: ${e.affiliation.name},\n                is admin: ${e.isAdmin}, is operator: ${e.isOperator}`}))};var pe=({users:e,handleEdit:a})=>r.a.createElement(ie.a,{style:{maxHeight:"76vh",overflowY:"auto"}},e.map(e=>r.a.createElement(ue,{key:e.id,user:e,handleEdit:()=>a(e)})));var me=({handleAppend:e,...a})=>r.a.createElement("div",null,r.a.createElement(z.a,{position:"static",color:"default"},r.a.createElement(Q.a,null,r.a.createElement(ee.a,{variant:"title",color:"inherit",style:{flexGrow:1}},"users"),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(te.a,{onClick:e},r.a.createElement(re.a,null))))),r.a.createElement(pe,a));var fe=Object(o.b)(e=>({users:e.users}),e=>({handleAppend:()=>e({type:"OPEN_DIALOG_APPEND"}),handleEdit:a=>e((e=>({type:"OPEN_DIALOG_EDIT",user:e}))(a))}))(me);var he=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(B,null),r.a.createElement(fe,null));const Ee=document.querySelector('script[src*="users"]').dataset,ge=JSON.parse(Ee.users),Oe=Object(i.e)(p,{users:ge,userDialog:{isOpen:!1}});Object(s.render)(r.a.createElement(m.MuiThemeProvider,{theme:f.a},r.a.createElement(o.a,{store:Oe},r.a.createElement(he,null))),document.getElementById("root"))}});
//# sourceMappingURL=users.bundle.min.js.map