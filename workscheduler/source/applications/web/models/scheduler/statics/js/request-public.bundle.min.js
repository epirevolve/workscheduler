!function(e){function t(t){for(var r,l,o=t[0],c=t[1],u=t[2],d=0,m=[];d<o.length;d++)l=o[d],n[l]&&m.push(n[l][0]),n[l]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(i&&i(t);m.length;)m.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=l(l.s=a[0]))}return e}var r={},n={7:0},s=[];function l(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=r,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(a,r,function(t){return e[t]}.bind(null,r));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var i=c;s.push([647,0]),a()}({15:function(e,t,a){"use strict";a.d(t,"a",function(){return r});class r{constructor(e){this.id=e}append(e,t){const a=$(this.id),r=$("<div>").addClass(`alert ${t} alert-dismissible fade show`).append($("<button>").addClass("close").attr({type:"button","data-dismiss":"alert"}).html("&times;"));r.append(e),a.append(r)}}},17:function(e,t,a){"use strict";var r=a(10),n=a(29),s=a.n(n),l=a(26),o=a.n(l);const c=Object(r.createMuiTheme)({palette:{primary:s.a,secondary:o.a},typography:{useNextVariants:!0}});t.a=c},220:function(e,t,a){var r={"./af":53,"./af.js":53,"./ar":54,"./ar-dz":55,"./ar-dz.js":55,"./ar-kw":56,"./ar-kw.js":56,"./ar-ly":57,"./ar-ly.js":57,"./ar-ma":58,"./ar-ma.js":58,"./ar-sa":59,"./ar-sa.js":59,"./ar-tn":60,"./ar-tn.js":60,"./ar.js":54,"./az":61,"./az.js":61,"./be":62,"./be.js":62,"./bg":63,"./bg.js":63,"./bm":64,"./bm.js":64,"./bn":65,"./bn.js":65,"./bo":66,"./bo.js":66,"./br":67,"./br.js":67,"./bs":68,"./bs.js":68,"./ca":69,"./ca.js":69,"./cs":70,"./cs.js":70,"./cv":71,"./cv.js":71,"./cy":72,"./cy.js":72,"./da":73,"./da.js":73,"./de":74,"./de-at":75,"./de-at.js":75,"./de-ch":76,"./de-ch.js":76,"./de.js":74,"./dv":77,"./dv.js":77,"./el":78,"./el.js":78,"./en-SG":79,"./en-SG.js":79,"./en-au":80,"./en-au.js":80,"./en-ca":81,"./en-ca.js":81,"./en-gb":82,"./en-gb.js":82,"./en-ie":83,"./en-ie.js":83,"./en-il":84,"./en-il.js":84,"./en-nz":85,"./en-nz.js":85,"./eo":86,"./eo.js":86,"./es":87,"./es-do":88,"./es-do.js":88,"./es-us":89,"./es-us.js":89,"./es.js":87,"./et":90,"./et.js":90,"./eu":91,"./eu.js":91,"./fa":92,"./fa.js":92,"./fi":93,"./fi.js":93,"./fo":94,"./fo.js":94,"./fr":95,"./fr-ca":96,"./fr-ca.js":96,"./fr-ch":97,"./fr-ch.js":97,"./fr.js":95,"./fy":98,"./fy.js":98,"./ga":99,"./ga.js":99,"./gd":100,"./gd.js":100,"./gl":101,"./gl.js":101,"./gom-latn":102,"./gom-latn.js":102,"./gu":103,"./gu.js":103,"./he":104,"./he.js":104,"./hi":105,"./hi.js":105,"./hr":106,"./hr.js":106,"./hu":107,"./hu.js":107,"./hy-am":108,"./hy-am.js":108,"./id":109,"./id.js":109,"./is":110,"./is.js":110,"./it":111,"./it-ch":112,"./it-ch.js":112,"./it.js":111,"./ja":113,"./ja.js":113,"./jv":114,"./jv.js":114,"./ka":115,"./ka.js":115,"./kk":116,"./kk.js":116,"./km":117,"./km.js":117,"./kn":118,"./kn.js":118,"./ko":119,"./ko.js":119,"./ku":120,"./ku.js":120,"./ky":121,"./ky.js":121,"./lb":122,"./lb.js":122,"./lo":123,"./lo.js":123,"./lt":124,"./lt.js":124,"./lv":125,"./lv.js":125,"./me":126,"./me.js":126,"./mi":127,"./mi.js":127,"./mk":128,"./mk.js":128,"./ml":129,"./ml.js":129,"./mn":130,"./mn.js":130,"./mr":131,"./mr.js":131,"./ms":132,"./ms-my":133,"./ms-my.js":133,"./ms.js":132,"./mt":134,"./mt.js":134,"./my":135,"./my.js":135,"./nb":136,"./nb.js":136,"./ne":137,"./ne.js":137,"./nl":138,"./nl-be":139,"./nl-be.js":139,"./nl.js":138,"./nn":140,"./nn.js":140,"./pa-in":141,"./pa-in.js":141,"./pl":142,"./pl.js":142,"./pt":143,"./pt-br":144,"./pt-br.js":144,"./pt.js":143,"./ro":145,"./ro.js":145,"./ru":146,"./ru.js":146,"./sd":147,"./sd.js":147,"./se":148,"./se.js":148,"./si":149,"./si.js":149,"./sk":150,"./sk.js":150,"./sl":151,"./sl.js":151,"./sq":152,"./sq.js":152,"./sr":153,"./sr-cyrl":154,"./sr-cyrl.js":154,"./sr.js":153,"./ss":155,"./ss.js":155,"./sv":156,"./sv.js":156,"./sw":157,"./sw.js":157,"./ta":158,"./ta.js":158,"./te":159,"./te.js":159,"./tet":160,"./tet.js":160,"./tg":161,"./tg.js":161,"./th":162,"./th.js":162,"./tl-ph":163,"./tl-ph.js":163,"./tlh":164,"./tlh.js":164,"./tr":165,"./tr.js":165,"./tzl":166,"./tzl.js":166,"./tzm":167,"./tzm-latn":168,"./tzm-latn.js":168,"./tzm.js":167,"./ug-cn":169,"./ug-cn.js":169,"./uk":170,"./uk.js":170,"./ur":171,"./ur.js":171,"./uz":172,"./uz-latn":173,"./uz-latn.js":173,"./uz.js":172,"./vi":174,"./vi.js":174,"./x-pseudo":175,"./x-pseudo.js":175,"./yo":176,"./yo.js":176,"./zh-cn":177,"./zh-cn.js":177,"./zh-hk":178,"./zh-hk.js":178,"./zh-tw":179,"./zh-tw.js":179};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id=220},305:function(e,t,a){"use strict";var r=a(0),n=a.n(r),s=a(11),l=a(10),o=a(17),c=a(23),u=a.n(c),i=a(276),d=a.n(i),m=a(277),p=a.n(m),h=a(13),j=a.n(h),y=a(15);const E=document.querySelector('script[src*="request"]').dataset,f=E.url,b=new Date(E.scheduleOf),g=E.scheduleOfName;var v=class extends n.a.Component{requestOfOtherMonthYear(e){const t=Date.parse(b);if(1==isNaN(t))return new y.a("#alertContainer").append("Sorry, we cant do more process due to invalid date."),!1;const a=new Date(t);a.setMonth(a.getMonth()+e);const r=a.toYearMonthFormatString();location.href=`${f}?schedule_of=${r}`}render(){const[e,t]=this.setMonthChangeButtonAvailability();return n.a.createElement(j.a,{container:!0,className:"cl-tool-header"},n.a.createElement(j.a,{item:!0,xs:3,className:"cl-tool-left"},n.a.createElement(u.a,{disabled:!e,onClick:()=>this.requestOfOtherMonthYear(-1)},n.a.createElement(d.a,null))),n.a.createElement(j.a,{item:!0,xs:!0,className:"cl-tool-center cl-title"},n.a.createElement("h2",null,g)),n.a.createElement(j.a,{item:!0,xs:3,className:"cl-tool-right"},n.a.createElement(u.a,{disabled:!t,onClick:()=>this.requestOfOtherMonthYear(1)},n.a.createElement(p.a,null))))}};var O=()=>n.a.createElement(v,null);Object(s.render)(n.a.createElement(l.MuiThemeProvider,{theme:o.a},n.a.createElement(O,null)),document.getElementById("monthSelector"))},647:function(e,t,a){"use strict";a.r(t);a(305);var r=a(0),n=a.n(r),s=a(11),l=a(14),o=a(7),c=a(4),u=a.n(c);var i=(e={isOpen:!1},t)=>{switch(t.type){case"OPEN_DIALOG_APPEND":return{...e,isOpen:!0,id:"",title:"",note:"",atFrom:u()(t.request.atFrom),atTo:u()(t.request.atTo)};case"OPEN_DIALOG_EDIT":return{...e,isOpen:!0,id:t.request.id,title:t.request.title,note:t.request.note,atFrom:u()(t.request.atFrom),atTo:u()(t.request.atTo)};case"CLOSE_DIALOG":return{...e,isOpen:!1};case"CHANGE_TITLE":return{...e,title:t.text};case"CHANGE_NOTE":return{...e,note:t.text};case"CHANGE_DATE":return{...e,atFrom:t.atFrom,atTo:t.atTo};default:return e}};var d=(e=[],t)=>{switch(t.type){case"APPEND_REQUEST":{const a=new Date(t.request.atFrom).setEarliestTime(),r=new Date(t.request.atTo).setLatestTime();return e.map(e=>e.map(e=>{if(!e)return e;const n=new Date(`${t.scheduleOf}-${e.day}`);return a<=n&&n<=r?{...e,requests:e.requests.concat(t.request)}:e}))}case"REMOVE_REQUEST":return e.map(e=>e.map(e=>e?{...e,requests:e.requests.filter(e=>e.id!=t.id)}:e));default:return e}},m=Object(l.c)({requestDialog:i,requestCalendar:d}),p=a(10),h=a(17),j=a(13),y=a.n(j),E=a(35),f=a.n(E),b=a(15);const g=(e,t)=>({type:"APPEND_REQUEST",scheduleOf:e,request:t}),v=e=>({type:"REMOVE_REQUEST",id:e});var O=a(22),q=a.n(O),D=a(21),N=a.n(D),T=a(180),w=a.n(T),C=a(190),k=a.n(C),S=a(181),x=a.n(S),_=a(189),F=a.n(_),A=a(207),M=a.n(A),P=a(182),z=a.n(P),I=a(229),G=a.n(I),H=(a(226),a(613),a(381)),L=a.n(H);const R=e=>!!e&&(e.valueOf()<minDate.valueOf()||maxDate.valueOf()<e.valueOf());var Y=({requestDialog:e,onTitleChange:t,onNoteChange:a,onDateChange:r,handleClose:s,handleRemove:l,handleSave:o})=>{const c=n.a.createElement(L.a,{defaultValue:u()("00:00","HH:mm"),showSecond:!1,minuteStep:15}),i=n.a.createElement(G.a,{showDateInput:!1,disabledDate:R,timePicker:c,showToday:!1,format:"YYYY-MM-DD HH:mm"});return n.a.createElement(w.a,{open:e.isOpen,"aria-labelledby":"request-store"},n.a.createElement(x.a,null,"register request"),n.a.createElement(F.a,null,n.a.createElement(M.a,null,"to set your scheduled holiday, please submit your request"),n.a.createElement(M.a,null,"this request is not shown to administrators"),n.a.createElement(N.a,{autoFocus:!0,margin:"dense",label:"title",fullWidth:!0,onChange:t,value:e.title}),n.a.createElement(N.a,{autoFocus:!0,margin:"dense",label:"note",fullWidth:!0,onChange:a,value:e.note}),n.a.createElement(z.a,{animation:"slide-up",calendar:i,style:{zIndex:1500},value:[e.atFrom,e.atTo],onChange:r},({value:e})=>{const t=e=>e.format("YYYY-MM-DD HH:mm"),a=(e=>e&&e[0]&&e[1])(e)&&`${t(e[0])} - ${t(e[1])}`||"";return n.a.createElement(N.a,{autoFocus:!0,margin:"dense",label:"date",fullWidth:!0,InputProps:{readOnly:!0,tabIndex:-1},value:a})})),n.a.createElement(k.a,null,n.a.createElement(q.a,{onClick:s,color:"default"},"Close"),e.id&&n.a.createElement(q.a,{onClick:()=>l(e.id),color:"secondary",variant:"outlined"},"Remove"),n.a.createElement(q.a,{onClick:()=>o(e),color:"primary",variant:"outlined"},"Save")))};const J=document.querySelector('script[src*="request-public"]').dataset,U=JSON.parse(J.holidays||0),Q=JSON.parse(J.paidHolidays||0),V=J.urlAddRequest,W=J.urlUpdateRequest,B=new Date(J.scheduleOf).toYearMonthFormatString();var X=Object(o.b)(e=>({requestDialog:e.requestDialog}),e=>({onTitleChange:t=>e((e=>({type:"CHANGE_TITLE",text:e}))(t.target.value)),onNoteChange:t=>e((e=>({type:"CHANGE_NOTE",text:e}))(t.target.value)),onDateChange:t=>e((([e,t])=>({type:"CHANGE_DATE",atFrom:e,atTo:t}))(t)),handleClose:()=>e({type:"CLOSE_DIALOG"}),handleRemove:t=>{f.a.delete(W.replace("request_id",t)).send().set("X-CSRFToken",csrfToken).then(()=>{e(v(t)),new b.a("#alertContainer").append("we are succeeded to delete your request","alert-info")}),e({type:"CLOSE_DIALOG"})},handleSave:t=>{const a={...t,atFrom:t.atFrom.toDate().toDateTimeFormatString(),atTo:t.atTo.toDate().toDateTimeFormatString()},r=()=>{f.a.post(a.id?W.replace("request_id",a.id):V).send(a).set("X-CSRFToken",csrfToken).then(t=>{a.id?(e(v(a.id)),e(g(B,JSON.parse(t.text)))):e(g(B,JSON.parse(t.text))),new b.a("#alertContainer").append("we are succeeded to store your request","alert-info")}).catch(e=>{const t=JSON.parse(e.response.text),a=new b.a("#alertContainer"),r=t.errorMessage||"we have some trouble with appending request...";a.append(`Oops, Sorry... ${r}`,"alert-danger")})};U<=$(".request").length?showConfirmDialog("No Problem?",`adding more request will decrease your paid holidays.${Q<=0?"<br><br>and also maybe your paid holidays are empty.":""}`,e=>{e&&r()}):r(),e({type:"CLOSE_DIALOG"})}}))(Y),K=a(23),Z=a.n(K),ee=a(382),te=a.n(ee);var ae=({request:e,handleEdit:t,className:a})=>n.a.createElement("button",{className:`btn request btn-block request-item ${a}`,type:"button",onClick:t,"data-at-from":e.atFrom,"data-at-to":e.atTo},e.title);const re=document.querySelector('script[src*="request-public"]').dataset,ne=new Date(re.scheduleOf);var se=class extends n.a.Component{handleAppend(e,t){if(e.requests.length>=2)return void new b.a("#alertContainer").append("cant append more request on this day","alert-danger");const a=`${ne.getFullYear()}-${ne.getMonth()+1}-${e.day}`;t(new Date(`${a}T09:30`),new Date(`${a}T18:00`))}render(){const{day:e,handleAppend:t,handleEdit:a,...r}=this.props;if(!e)return n.a.createElement(y.a,{item:!0,xs:!0,className:"cl-body-cell"});const s=[];for(const t of e.requests){if(t.operator.id!=operatorId||new Date(t.atFrom).getDate()!=e.day&&1!=e.day&&"Sun"!=e.dayName)continue;const r=new Date(t.atFrom);r.setDate(e.day);const l=new Date(t.atTo);let o=l.getDate()-r.getDate();o<=7&&r.getDay()<=l.getDay()||(o=6-r.getDay()),s.push(n.a.createElement(ae,{key:t.id,request:t,className:`day-${o+1}`,handleEdit:()=>a(t)}))}return n.a.createElement(y.a,{item:!0,xs:!0,className:"cl-body-cell"},n.a.createElement("div",null,n.a.createElement(Z.a,{"aria-label":"Add Request",color:"secondary",className:"add-request",onClick:()=>this.handleAppend(e,t)},n.a.createElement(te.a,null)),n.a.createElement("span",{className:"cl-day"},e.day)),n.a.createElement("div",{className:"request-container"},s))}};function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var oe=({requestCalendar:e,...t})=>{const a=[];for(const[r,s]of e.entries()){const e=[];for(const[a,l]of s.entries())e.push(n.a.createElement(se,le({key:`${r}-${a}`,day:l},t)));a.push(n.a.createElement(y.a,{container:!0,key:`${r}`},e))}return n.a.createElement("div",{style:{margin:"0 1rem"}},n.a.createElement("div",{className:"cl"},n.a.createElement(y.a,{container:!0,className:"cl-header"},n.a.createElement(y.a,{item:!0,xs:!0,className:"cl-header-cell text-danger"},"Sun"),n.a.createElement(y.a,{item:!0,xs:!0,className:"cl-header-cell"},"Mon"),n.a.createElement(y.a,{item:!0,xs:!0,className:"cl-header-cell"},"Tue"),n.a.createElement(y.a,{item:!0,xs:!0,className:"cl-header-cell"},"Wed"),n.a.createElement(y.a,{item:!0,xs:!0,className:"cl-header-cell"},"Thu"),n.a.createElement(y.a,{item:!0,xs:!0,className:"cl-header-cell"},"Fri"),n.a.createElement(y.a,{item:!0,xs:!0,className:"cl-header-cell text-info"},"Sat")),n.a.createElement("div",{className:"cl-body"},a)))};var ce=Object(o.b)(e=>({requestCalendar:e.requestCalendar}),e=>({handleAppend:(t,a)=>e(((e,t)=>({type:"OPEN_DIALOG_APPEND",request:Object.assign({},{atFrom:u()(e),atTo:u()(t)})}))(t,a)),handleEdit:t=>e((e=>({type:"OPEN_DIALOG_EDIT",request:Object.assign({},e,{atFrom:u()(e.atFrom),atTo:u()(e.atTo)})}))(t))}))(oe);const ue=document.querySelector('script[src*="request-public"]').dataset,ie=JSON.parse(ue.holidays),de=JSON.parse(ue.paidHolidays||0);var me=()=>n.a.createElement(n.a.Fragment,null,n.a.createElement(X,null),n.a.createElement(y.a,{container:!0},n.a.createElement(y.a,{item:!0,sm:10},n.a.createElement(ce,null)),n.a.createElement(y.a,{item:!0,sm:2},n.a.createElement("div",null,n.a.createElement("h5",null,"Monthly Holidays"),n.a.createElement("p",null,ie||0," days")),n.a.createElement("hr",null),n.a.createElement("div",null,n.a.createElement("h5",null,"Remained Paid Holidays"),n.a.createElement("p",null,de||0," days")))));const pe=document.querySelector('script[src*="request-public"]').dataset,he=JSON.parse(pe.calendar),je=Object(l.e)(m,{requestCalendar:he,requestDialog:{isOpen:!1}});Object(s.render)(n.a.createElement(p.MuiThemeProvider,{theme:h.a},n.a.createElement(o.a,{store:je},n.a.createElement(me,null))),document.getElementById("root"))}});
//# sourceMappingURL=request-public.bundle.min.js.map