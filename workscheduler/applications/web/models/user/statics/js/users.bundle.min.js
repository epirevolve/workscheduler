!function(e){function n(n){for(var r,o,c=n[0],l=n[1],u=n[2],d=0,f=[];d<c.length;d++)o=c[d],a[o]&&f.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(s&&s(n);f.length;)f.shift()();return i.push.apply(i,u||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],r=!0,c=1;c<t.length;c++){var l=t[c];0!==a[l]&&(r=!1)}r&&(i.splice(n--,1),e=o(o.s=t[0]))}return e}var r={},a={16:0},i=[];function o(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=r,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)o.d(t,r,function(n){return e[n]}.bind(null,r));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=n,c=c.slice();for(var u=0;u<c.length;u++)n(c[u]);var s=l;i.push([629,0]),t()}({13:function(e,n,t){"use strict";var r=t(7),a=t(26),i=t.n(a),o=t(24),c=t.n(o),l=Object(r.createMuiTheme)({palette:{primary:i.a,secondary:c.a},typography:{useNextVariants:!0}});n.a=l},15:function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.d(n,"a",function(){return a});var a=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=n}var n,t,a;return n=e,(t=[{key:"append",value:function(e,n){var t=$(this.id),r=$("<div>").addClass("alert ".concat(n," alert-dismissible fade show")).append($("<button>").addClass("close").attr({type:"button","data-dismiss":"alert"}).html("&times;"));r.append(e),t.append(r)}}])&&r(n.prototype,t),a&&r(n,a),e}()},629:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(10),o=t(17),c=t(8);function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){u(e,n,t[n])})}return e}function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var s=document.querySelector('script[src*="users"]').dataset,d=JSON.parse(s.affiliations),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"OPEN_DIALOG_APPEND":return l({},e,{isOpen:!0,id:"",loginId:"",name:"",affiliation:d[0],isAdmin:!1,isOperator:!1});case"OPEN_DIALOG_EDIT":return l({},e,{isOpen:!0,id:n.user.id,loginId:n.user.loginId,name:n.user.name,affiliation:n.user.affiliation,isAdmin:n.user.isAdmin,isOperator:n.user.isOperator});case"CLOSE_DIALOG":return l({},e,{isOpen:!1});case"CHANGE_LOGIN_ID":return l({},e,{loginId:n.text});case"CHANGE_NAME":return l({},e,{name:n.text});case"CHANGE_AFFILIATION":return l({},e,{affiliation:n.obj});case"CHANGE_IS_ADMIN":return l({},e,{isAdmin:n.isChecked});case"CHANGE_IS_OPERATOR":return l({},e,{isOperator:n.isChecked});default:return e}};function p(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"APPEND_USER":return e.concat([n.user]);case"EDIT_USER":return e.map(function(e){return e.id!=n.user.id?e:n.user});case"INACTIVATE_USER":return e.map(function(e){return e.id!=n.id?e:function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){p(e,n,t[n])})}return e}({},e,{isInactivated:!0})});default:return e}},h=Object(o.b)({userDialog:f,users:m}),g=t(7),O=t(13),y=t(27),E=t.n(y),v=t(15),b=t(14),C=t.n(b),I=t(19),A=t.n(I),w=t(181),S=t.n(w),N=t(193),_=t.n(N),P=t(182),j=t.n(P),k=t(192),D=t.n(k),T=t(197),G=t.n(T),x=t(179),L=t.n(x),R=t(37),M=t.n(R),F=t(186),H=t.n(F),J=t(178),U=t.n(J),q=t(244),V=t.n(q),W=t(185),X=t.n(W),B=$('script[src*="users"]').data("affiliations"),Y=function(e){var n=e.userDialog,t=e.onLoginIdChange,r=e.onNameChange,i=e.onAffiliationChange,o=e.onIsAdminChange,c=e.onIsOperatorChange,l=e.handleClose,u=e.handleInactivate,s=e.handleResetPassword,d=e.handleSave,f=B.map(function(e){return a.a.createElement(U.a,{key:e.id,value:e},e.name)}),p=n.affiliation||"";return p&&B.map(function(e){return e.id}).includes(p.id)&&(p=B.find(function(e){return e.id==p.id})),a.a.createElement(S.a,{open:n.isOpen,"aria-labelledby":"user-store",maxWidth:"lg"},a.a.createElement(j.a,null,"register user"),a.a.createElement(D.a,null,a.a.createElement(G.a,null,"automatically registered operator info after user registration if he/she is not operator."),a.a.createElement(A.a,{autoFocus:!0,margin:"dense",label:"login id",fullWidth:!0,required:!0,onChange:t,value:n.loginId}),a.a.createElement(A.a,{margin:"dense",label:"name",fullWidth:!0,required:!0,onChange:r,value:n.name}),a.a.createElement(X.a,{margin:"dense"},a.a.createElement(V.a,{htmlFor:"affiliation"},"affiliation"),a.a.createElement(H.a,{value:p,id:"affiliation",onChange:i},f)),a.a.createElement("br",null),a.a.createElement(L.a,{margin:"dense",control:a.a.createElement(M.a,{checked:n.isAdmin,onChange:o,color:"primary"}),label:"is admin"}),a.a.createElement(L.a,{margin:"dense",control:a.a.createElement(M.a,{checked:n.isOperator,onChange:c,color:"primary"}),label:"is operator"})),a.a.createElement(_.a,null,a.a.createElement(C.a,{onClick:l,color:"default",className:"mr-1"},"Close"),n.id&&a.a.createElement(a.a.Fragment,null,a.a.createElement(C.a,{onClick:function(){return u(n.id)},variant:"outlined",color:"secondary",className:"mr-1"},"Inactivate"),a.a.createElement(C.a,{onClick:function(){return s(n.id)},variant:"outlined",color:"secondary",className:"mr-1"},"Reset Password")),a.a.createElement(C.a,{onClick:function(){return d(n)},variant:"outlined",color:"primary"},"Save")))},z=document.querySelector('script[src*="users"]').dataset.url,K=Object(c.b)(function(e){return{userDialog:e.userDialog}},function(e){return{onLoginIdChange:function(n){return e({type:"CHANGE_LOGIN_ID",text:n.target.value})},onNameChange:function(n){return e({type:"CHANGE_NAME",text:n.target.value})},onAffiliationChange:function(n){return e({type:"CHANGE_AFFILIATION",obj:n.target.value})},onIsAdminChange:function(n){return e({type:"CHANGE_IS_ADMIN",isChecked:n.target.checked})},onIsOperatorChange:function(n){return e({type:"CHANGE_IS_OPERATOR",isChecked:n.target.checked})},handleClose:function(){return e({type:"CLOSE_DIALOG"})},handleInactivate:function(n){E.a.post("".concat(z).concat(n,"/inactivate")).send().set("X-CSRFToken",csrfToken).then(function(t){new v.a("#alertContainer").append("user was successfully inactivated.","alert-info"),e(function(e){return{type:"INACTIVATE_USER",id:e}}(n))}).catch(function(e){var n=JSON.parse(e.response.text),t=new v.a("#alertContainer"),r=n.errorMessage||"we have some trouble with inactivate user...";t.append("Oops, Sorry... ".concat(r),"alert-danger")}),e({type:"CLOSE_DIALOG"})},handleResetPassword:function(n){E.a.post("".concat(z).concat(n,"/reset-password")).send().set("X-CSRFToken",csrfToken).then(function(e){new v.a("#alertContainer").append("user password was successfully reset.","alert-info")}).catch(function(e){var n=JSON.parse(e.response.text),t=new v.a("#alertContainer"),r=n.errorMessage||"we have some trouble with resetting password...";t.append("Oops, Sorry... ".concat(r),"alert-danger")}),e({type:"CLOSE_DIALOG"})},handleSave:function(n){E.a.post(n.id?"".concat(z).concat(n.id):z).send(n).set("X-CSRFToken",csrfToken).then(function(t){var r=new v.a("#alertContainer");r.append("user was successfully stored.","alert-info"),n.id?e({type:"EDIT_USER",user:JSON.parse(t.text)}):(r.append("his/her password is p + his/her login id. Please change it.","alert-info"),e(function(e){return{type:"APPEND_USER",user:e}}(JSON.parse(t.text))))}).catch(function(e){var n=JSON.parse(e.response.text),t=new v.a("#alertContainer"),r=n.errorMessage||"we have some trouble with appending user...";t.append("Oops, Sorry... ".concat(r),"alert-danger")}),e({type:"CLOSE_DIALOG"})}}})(Y),Q=t(188),Z=t.n(Q),ee=t(189),ne=t.n(ee),te=t(16),re=t.n(te),ae=t(21),ie=t.n(ae),oe=t(174),ce=t.n(oe),le=t(30),ue=t.n(le),se=t(23),de=t.n(se),fe=t(22),pe=t.n(fe),me=function(e){var n=e.user,t=e.handleEdit,r=n.isInactivated?"inactivated":"";return a.a.createElement(de.a,{button:!0,onClick:t,className:r},a.a.createElement(pe.a,{primary:n.name,secondary:"login id: ".concat(n.loginId,", affiliation: ").concat(n.affiliation.name,",\n                is admin: ").concat(n.isAdmin,", is operator: ").concat(n.isOperator)}))},he=function(e){var n=e.users,t=e.handleEdit,r=n.map(function(e){return a.a.createElement(me,{key:e.id,user:e,handleEdit:function(){return t(e)}})});return a.a.createElement(ue.a,{style:{maxHeight:"76vh",overflowY:"auto"}},r)};function ge(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var Oe=function(e){var n=e.handleAppend,t=ge(e,["handleAppend"]);return a.a.createElement("div",null,a.a.createElement(Z.a,{position:"static",color:"default"},a.a.createElement(ne.a,null,a.a.createElement(re.a,{variant:"title",color:"inherit",style:{flexGrow:1}},"users"),a.a.createElement("div",{style:{textAlign:"right"}},a.a.createElement(ie.a,{onClick:n},a.a.createElement(ce.a,null))))),a.a.createElement(he,t))},ye=Object(c.b)(function(e){return{users:e.users}},function(e){return{handleAppend:function(){return e({type:"OPEN_DIALOG_APPEND"})},handleEdit:function(n){return e(function(e){return{type:"OPEN_DIALOG_EDIT",user:e}}(n))}}})(Oe),Ee=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(K,null),a.a.createElement(ye,null))},ve=document.querySelector('script[src*="users"]').dataset,be=JSON.parse(ve.users),Ce=Object(o.c)(h,{users:be,userDialog:{isOpen:!1}});Object(i.render)(a.a.createElement(g.MuiThemeProvider,{theme:O.a},a.a.createElement(c.a,{store:Ce},a.a.createElement(Ee,null))),document.getElementById("root"))}});
//# sourceMappingURL=users.bundle.min.js.map