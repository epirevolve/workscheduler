import{AlertManager}from"/statics/js/alert-helper.js";!function(){let a=function(a){$("#reset").prop("disabled",a),$("#store").prop("disabled",a),$("#inactivate").prop("disabled",a)};$(document).ready(function(){$("#userTable tbody tr").click(function(){let e=$(this);$("#userForm").attr("action",`/users/${e.data("id")}`),$("#id").val(e.data("id")),$("#loginId").val(e.data("login-id")),$("#name").val(e.data("name")),$("#affiliation").val(e.data("affiliation-id")),$("#isAdmin").prop("checked","True"==e.data("is-admin")),$("#isOperator").prop("checked","True"==e.data("is-operator")),"True"==e.data("is-inactivated")?a(!0):a(!1)}),$("#new").click(function(){$("#userForm").attr("action","/users/"),a(!1)}),$("#reset").click(function(){let a=$('input[name="id"]').val();""!=a&&showConfirmDialog("Would you really reset selected user password?","this action cant be undo.",e=>{e&&$.ajax({url:`/users/${a}/reset-password`,type:"POST",data:{id:a}}).done(a=>{new AlertManager("#alertContainer").append('Successfully changed selected user password. Please notice him/her new password is "p" + his/her login id.',"alert-info")}).fail(a=>{new AlertManager("#alertContainer").append("Oops, Sorry we have some trouble with reset password...","alert-danger")})})}),$("#inactivate").click(function(){let a=$('input[name="id"]').val();""!=a&&showConfirmDialog("Would you really inactivate selected user?","this action cant be undo.",e=>{e&&$.ajax({url:`/users/${a}/inactivate`,type:"POST",data:{id:a}}).done(e=>{new AlertManager("#alertContainer").append("Successfully inactivate user.","alert-info"),$(`tr[data-id=${a}]`).data("is-inactivated","True"),$(`tr[data-id=${a}]`).attr("data-is-inactivated","True")}).fail(a=>{new AlertManager("#alertContainer").append("Oops, Sorry we have some trouble with inactivating...","alert-danger")})})})})}(jQuery);