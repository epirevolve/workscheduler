!function(e){function t(t){for(var r,l,o=t[0],c=t[1],i=t[2],d=0,m=[];d<o.length;d++)l=o[d],s[l]&&m.push(s[l][0]),s[l]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(u&&u(t);m.length;)m.shift()();return n.push.apply(n,i||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(r=!1)}r&&(n.splice(t--,1),e=l(l.s=a[0]))}return e}var r={},s={7:0},n=[];function l(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=r,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(a,r,function(t){return e[t]}.bind(null,r));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var i=0;i<o.length;i++)t(o[i]);var u=c;n.push([641,0]),a()}({15:function(e,t,a){"use strict";a.d(t,"a",function(){return r});class r{constructor(e){this.id=e}append(e,t){let a=$(this.id),r=$("<div>").addClass(`alert ${t} alert-dismissible fade show`).append($("<button>").addClass("close").attr({type:"button","data-dismiss":"alert"}).html("&times;"));r.append(e),a.append(r)}}},17:function(e,t,a){"use strict";var r=a(10),s=a(32),n=a.n(s),l=a(29),o=a.n(l);const c=Object(r.createMuiTheme)({palette:{primary:n.a,secondary:o.a},typography:{useNextVariants:!0}});t.a=c},223:function(e,t,a){var r={"./af":58,"./af.js":58,"./ar":59,"./ar-dz":60,"./ar-dz.js":60,"./ar-kw":61,"./ar-kw.js":61,"./ar-ly":62,"./ar-ly.js":62,"./ar-ma":63,"./ar-ma.js":63,"./ar-sa":64,"./ar-sa.js":64,"./ar-tn":65,"./ar-tn.js":65,"./ar.js":59,"./az":66,"./az.js":66,"./be":67,"./be.js":67,"./bg":68,"./bg.js":68,"./bm":69,"./bm.js":69,"./bn":70,"./bn.js":70,"./bo":71,"./bo.js":71,"./br":72,"./br.js":72,"./bs":73,"./bs.js":73,"./ca":74,"./ca.js":74,"./cs":75,"./cs.js":75,"./cv":76,"./cv.js":76,"./cy":77,"./cy.js":77,"./da":78,"./da.js":78,"./de":79,"./de-at":80,"./de-at.js":80,"./de-ch":81,"./de-ch.js":81,"./de.js":79,"./dv":82,"./dv.js":82,"./el":83,"./el.js":83,"./en-SG":84,"./en-SG.js":84,"./en-au":85,"./en-au.js":85,"./en-ca":86,"./en-ca.js":86,"./en-gb":87,"./en-gb.js":87,"./en-ie":88,"./en-ie.js":88,"./en-il":89,"./en-il.js":89,"./en-nz":90,"./en-nz.js":90,"./eo":91,"./eo.js":91,"./es":92,"./es-do":93,"./es-do.js":93,"./es-us":94,"./es-us.js":94,"./es.js":92,"./et":95,"./et.js":95,"./eu":96,"./eu.js":96,"./fa":97,"./fa.js":97,"./fi":98,"./fi.js":98,"./fo":99,"./fo.js":99,"./fr":100,"./fr-ca":101,"./fr-ca.js":101,"./fr-ch":102,"./fr-ch.js":102,"./fr.js":100,"./fy":103,"./fy.js":103,"./ga":104,"./ga.js":104,"./gd":105,"./gd.js":105,"./gl":106,"./gl.js":106,"./gom-latn":107,"./gom-latn.js":107,"./gu":108,"./gu.js":108,"./he":109,"./he.js":109,"./hi":110,"./hi.js":110,"./hr":111,"./hr.js":111,"./hu":112,"./hu.js":112,"./hy-am":113,"./hy-am.js":113,"./id":114,"./id.js":114,"./is":115,"./is.js":115,"./it":116,"./it-ch":117,"./it-ch.js":117,"./it.js":116,"./ja":118,"./ja.js":118,"./jv":119,"./jv.js":119,"./ka":120,"./ka.js":120,"./kk":121,"./kk.js":121,"./km":122,"./km.js":122,"./kn":123,"./kn.js":123,"./ko":124,"./ko.js":124,"./ku":125,"./ku.js":125,"./ky":126,"./ky.js":126,"./lb":127,"./lb.js":127,"./lo":128,"./lo.js":128,"./lt":129,"./lt.js":129,"./lv":130,"./lv.js":130,"./me":131,"./me.js":131,"./mi":132,"./mi.js":132,"./mk":133,"./mk.js":133,"./ml":134,"./ml.js":134,"./mn":135,"./mn.js":135,"./mr":136,"./mr.js":136,"./ms":137,"./ms-my":138,"./ms-my.js":138,"./ms.js":137,"./mt":139,"./mt.js":139,"./my":140,"./my.js":140,"./nb":141,"./nb.js":141,"./ne":142,"./ne.js":142,"./nl":143,"./nl-be":144,"./nl-be.js":144,"./nl.js":143,"./nn":145,"./nn.js":145,"./pa-in":146,"./pa-in.js":146,"./pl":147,"./pl.js":147,"./pt":148,"./pt-br":149,"./pt-br.js":149,"./pt.js":148,"./ro":150,"./ro.js":150,"./ru":151,"./ru.js":151,"./sd":152,"./sd.js":152,"./se":153,"./se.js":153,"./si":154,"./si.js":154,"./sk":155,"./sk.js":155,"./sl":156,"./sl.js":156,"./sq":157,"./sq.js":157,"./sr":158,"./sr-cyrl":159,"./sr-cyrl.js":159,"./sr.js":158,"./ss":160,"./ss.js":160,"./sv":161,"./sv.js":161,"./sw":162,"./sw.js":162,"./ta":163,"./ta.js":163,"./te":164,"./te.js":164,"./tet":165,"./tet.js":165,"./tg":166,"./tg.js":166,"./th":167,"./th.js":167,"./tl-ph":168,"./tl-ph.js":168,"./tlh":169,"./tlh.js":169,"./tr":170,"./tr.js":170,"./tzl":171,"./tzl.js":171,"./tzm":172,"./tzm-latn":173,"./tzm-latn.js":173,"./tzm.js":172,"./ug-cn":174,"./ug-cn.js":174,"./uk":175,"./uk.js":175,"./ur":176,"./ur.js":176,"./uz":177,"./uz-latn":178,"./uz-latn.js":178,"./uz.js":177,"./vi":179,"./vi.js":179,"./x-pseudo":180,"./x-pseudo.js":180,"./yo":181,"./yo.js":181,"./zh-cn":182,"./zh-cn.js":182,"./zh-hk":183,"./zh-hk.js":183,"./zh-tw":184,"./zh-tw.js":184};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=n,e.exports=s,s.id=223},304:function(e,t,a){"use strict";var r=a(0),s=a.n(r),n=a(11),l=a(10),o=a(17),c=a(23),i=a.n(c),u=a(276),d=a.n(u),m=a(277),j=a.n(m),p=a(12),h=a.n(p);const y=document.querySelector('script[src*="request"]').dataset,f=y.url,E=new Date(y.scheduleOf),b=y.scheduleOfName;var g=class extends s.a.Component{requestOfOtherMonthYear(e){const t=Date.parse(E);if(1==isNaN(t))return new AlertManager("#alertContainer").append("Sorry, we cant do more process due to invalid date."),!1;let a=new Date(t);a.setMonth(a.getMonth()+e);const r=a.toYearMonthFormatString();location.href=`${f}?schedule_of=${r}`}render(){const[e,t]=this.setMonthChangeButtonAvailability();return s.a.createElement(h.a,{container:!0,className:"cl-tool-header"},s.a.createElement(h.a,{item:!0,xs:3,className:"cl-tool-left"},s.a.createElement(i.a,{disabled:!e,onClick:()=>this.requestOfOtherMonthYear(-1)},s.a.createElement(d.a,null))),s.a.createElement(h.a,{item:!0,xs:!0,className:"cl-tool-center cl-title"},s.a.createElement("h2",null,b)),s.a.createElement(h.a,{item:!0,xs:3,className:"cl-tool-right"},s.a.createElement(i.a,{disabled:!t,onClick:()=>this.requestOfOtherMonthYear(1)},s.a.createElement(j.a,null))))}};var O=()=>s.a.createElement(g,null);Object(n.render)(s.a.createElement(l.MuiThemeProvider,{theme:o.a},s.a.createElement(O,null)),document.getElementById("monthSelector"))},641:function(e,t,a){"use strict";a.r(t);a(304);var r=a(0),s=a.n(r),n=a(11),l=a(14),o=a(7),c=a(3),i=a.n(c);var u=(e={isOpen:!1},t)=>{switch(t.type){case"OPEN_DIALOG_APPEND":return{...e,isOpen:!0,id:"",title:"",note:"",atFrom:i()(t.request.atFrom),atTo:i()(t.request.atTo)};case"OPEN_DIALOG_EDIT":return{...e,isOpen:!0,id:t.request.id,title:t.request.title,note:t.request.note,atFrom:i()(t.request.atFrom),atTo:i()(t.request.atTo)};case"CLOSE_DIALOG":return{...e,isOpen:!1};case"CHANGE_TITLE":return{...e,title:t.text};case"CHANGE_NOTE":return{...e,note:t.text};case"CHANGE_DATE":return{...e,atFrom:t.atFrom,atTo:t.atTo};default:return e}};var d=(e=[],t)=>{switch(t.type){case"APPEND_REQUEST":const a=new Date(t.request.atFrom).setEarliestTime(),r=new Date(t.request.atTo).setLatestTime();return e.map(e=>e.map(e=>{if(!e)return e;const s=new Date(`${t.scheduleOf}-${e.day}`);return a<=s&&s<=r?{...e,requests:e.requests.concat(t.request)}:e}));case"REMOVE_REQUEST":return e.map(e=>e.map(e=>e?{...e,requests:e.requests.filter(e=>e.id!=t.id)}:e));default:return e}},m=Object(l.c)({requestDialog:u,requestCalendar:d}),j=a(10),p=a(17),h=a(12),y=a.n(h),f=a(27),E=a.n(f),b=a(15);const g=(e,t)=>({type:"APPEND_REQUEST",scheduleOf:e,request:t}),O=e=>({type:"REMOVE_REQUEST",id:e});a(20),a(22),a(185),a(197),a(186),a(196),a(200),a(187),a(232),a(229),a(610),a(380);var v=RequestDialog;const q=document.querySelector('script[src*="request-public"]').dataset,N=JSON.parse(q.holidays||0),D=JSON.parse(q.paidHolidays||0),T=q.urlAddRequest,w=q.urlUpdateRequest,k=new Date(q.scheduleOf).toYearMonthFormatString();var S=Object(o.b)(e=>({requestDialog:e.requestDialog}),e=>({onTitleChange:t=>e((e=>({type:"CHANGE_TITLE",text:e}))(t.target.value)),onNoteChange:t=>e((e=>({type:"CHANGE_NOTE",text:e}))(t.target.value)),onDateChange:t=>e((([e,t])=>({type:"CHANGE_DATE",atFrom:e,atTo:t}))(t)),handleClose:()=>e({type:"CLOSE_DIALOG"}),handleRemove:t=>{E.a.delete(w.replace("request_id",t)).send().set("X-CSRFToken",csrfToken).then(a=>{e(O(t)),new b.a("#alertContainer").append("we are succeeded to delete your request","alert-info")}),e({type:"CLOSE_DIALOG"})},handleSave:t=>{const a={...t,atFrom:t.atFrom.toDate().toDateTimeFormatString(),atTo:t.atTo.toDate().toDateTimeFormatString()},r=()=>{E.a.post(a.id?w.replace("request_id",a.id):T).send(a).set("X-CSRFToken",csrfToken).then(t=>{a.id?(e(O(a.id)),e(g(k,JSON.parse(t.text)))):e(g(k,JSON.parse(t.text))),new b.a("#alertContainer").append("we are succeeded to store your request","alert-info")}).catch(e=>{const t=JSON.parse(e.response.text),a=new b.a("#alertContainer"),r=t.errorMessage||"we have some trouble with appending request...";a.append(`Oops, Sorry... ${r}`,"alert-danger")})};N<=$(".request").length?showConfirmDialog("No Problem?",`adding more request will decrease your paid holidays.${D<=0?"<br><br>and also maybe your paid holidays are empty.":""}`,e=>{e&&r()}):r(),e({type:"CLOSE_DIALOG"})}}))(v),C=a(23),_=a.n(C),x=a(381),A=a.n(x);var F=({request:e,handleEdit:t,className:a})=>s.a.createElement("button",{className:`btn request btn-block request-item ${a}`,type:"button",onClick:t,"data-at-from":e.atFrom,"data-at-to":e.atTo},e.title);const M=document.querySelector('script[src*="request-public"]').dataset,P=new Date(M.scheduleOf);var z=class extends s.a.Component{handleAppend(e,t){if(e.requests.length>=2)return void new b.a("#alertContainer").append("cant append more request on this day","alert-danger");const a=`${P.getFullYear()}-${P.getMonth()+1}-${e.day}`;t(new Date(a+"T09:30"),new Date(a+"T18:00"))}render(){const{day:e,handleAppend:t,handleEdit:a,...r}=this.props;if(!e)return s.a.createElement(y.a,{item:!0,xs:!0,className:"cl-body-cell"});const n=[];for(let t of e.requests){if(t.operator.id!=operatorId||new Date(t.atFrom).getDate()!=e.day&&1!=e.day&&"Sun"!=e.dayName)continue;let r=new Date(t.atFrom);r.setDate(e.day);const l=new Date(t.atTo);let o=l.getDate()-r.getDate();o<=7&&r.getDay()<=l.getDay()||(o=6-r.getDay()),n.push(s.a.createElement(F,{key:t.id,request:t,className:`day-${o+1}`,handleEdit:()=>a(t)}))}return s.a.createElement(y.a,{item:!0,xs:!0,className:"cl-body-cell"},s.a.createElement("div",null,s.a.createElement(_.a,{"aria-label":"Add Request",color:"secondary",className:"add-request",onClick:()=>this.handleAppend(e,t)},s.a.createElement(A.a,null)),s.a.createElement("span",{className:"cl-day"},e.day)),s.a.createElement("div",{className:"request-container"},n))}};function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var L=({requestCalendar:e,...t})=>{const a=[];for(let[r,n]of e.entries()){let e=[];for(let[a,l]of n.entries())e.push(s.a.createElement(z,G({key:`${r}-${a}`,day:l},t)));a.push(s.a.createElement(y.a,{container:!0,key:`${r}`},e))}return s.a.createElement("div",{style:{margin:"0 1rem"}},s.a.createElement("div",{className:"cl"},s.a.createElement(y.a,{container:!0,className:"cl-header"},s.a.createElement(y.a,{item:!0,xs:!0,className:"cl-header-cell text-danger"},"Sun"),s.a.createElement(y.a,{item:!0,xs:!0,className:"cl-header-cell"},"Mon"),s.a.createElement(y.a,{item:!0,xs:!0,className:"cl-header-cell"},"Tue"),s.a.createElement(y.a,{item:!0,xs:!0,className:"cl-header-cell"},"Wed"),s.a.createElement(y.a,{item:!0,xs:!0,className:"cl-header-cell"},"Thu"),s.a.createElement(y.a,{item:!0,xs:!0,className:"cl-header-cell"},"Fri"),s.a.createElement(y.a,{item:!0,xs:!0,className:"cl-header-cell text-info"},"Sat")),s.a.createElement("div",{className:"cl-body"},a)))};var I=Object(o.b)(e=>({requestCalendar:e.requestCalendar}),e=>({handleAppend:(t,a)=>e(((e,t)=>({type:"OPEN_DIALOG_APPEND",request:Object.assign({},{atFrom:i()(e),atTo:i()(t)})}))(t,a)),handleEdit:t=>e((e=>({type:"OPEN_DIALOG_EDIT",request:Object.assign({},e,{atFrom:i()(e.atFrom),atTo:i()(e.atTo)})}))(t))}))(L);const R=document.querySelector('script[src*="request-public"]').dataset,H=JSON.parse(R.holidays),J=JSON.parse(R.paidHolidays||0);var U=()=>s.a.createElement(s.a.Fragment,null,s.a.createElement(S,null),s.a.createElement(y.a,{container:!0},s.a.createElement(y.a,{item:!0,sm:10},s.a.createElement(I,null)),s.a.createElement(y.a,{item:!0,sm:2},s.a.createElement("div",null,s.a.createElement("h5",null,"Monthly Holidays"),s.a.createElement("p",null,H||0," days")),s.a.createElement("hr",null),s.a.createElement("div",null,s.a.createElement("h5",null,"Remained Paid Holidays"),s.a.createElement("p",null,J||0," days")))));const Y=document.querySelector('script[src*="request-public"]').dataset,Q=JSON.parse(Y.calendar),B=Object(l.e)(m,{requestCalendar:Q,requestDialog:{isOpen:!1}});Object(n.render)(s.a.createElement(j.MuiThemeProvider,{theme:p.a},s.a.createElement(o.a,{store:B},s.a.createElement(U,null))),document.getElementById("root"))}});
//# sourceMappingURL=request-public.bundle.min.js.map