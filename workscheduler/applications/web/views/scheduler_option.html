{% extends "layout.html" %}
{% block body %}
<form method="post">
    {{ form.hidden_tag() }}
    <div class="row header mb-3 pl-3">
        <select class="custom-select custom-select-lg col-md-9" name="belong">
            {% for belong in belongs %}
                <option value="{{ belong.id }}" {% if belong.id==form.belong.data.id %}selected{% endif %}>
                    {{ belong.name }}
                </option>
            {% endfor %}
        </select>
        <div class="input-group date col-md-3" id="schedule-of" data-target-input="nearest">
            <div class="input-group-prepend">
                <span class="input-group-text">Scheduler Of</span>
            </div>
            <input type="text" class="form-control datetimepicker-input" value="{{ form.schedule_of.data }}"
                   name="schedule-of" data-target="#schedule-of">
            <div class="input-group-append" data-target="#schedule-of" data-toggle="datetimepicker">
                <div class="input-group-text"><i class="fa fa-calendar"></i></div>
            </div>
        </div>
    </div>
    <hr>
    <div class="custom-control-inline mb-3">
        <div class="m-1 mr-4 custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input" id="certified-skill" name="certified-skill"
                {% if form.certified_skill.data %}checked{% endif %}>
            <label class="custom-control-label" for="certified-skill">Certified skill</label>
        </div>
        <div class="m-1 custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input" id="not-certified-skill" name="not-certified-skill"
                {% if form.not_certified_skill.data %}checked{% endif %}>
            <label class="custom-control-label" for="not-certified-skill">Not certified skill</label>
        </div>
    </div>
    <div class="flex">
        <h4>Work Categories</h4>
        <button type="button" class="btn btn-info btn-small ml-4 mb-3" name="add-category">
            <i class="fa fa-pencil-alt"></i>
        </button>
    </div>
    <div class="row">
        <div id="category-column" class="card-columns col-md-10">
            {% for work_category in form.work_categories %}
                <div class="card" data-id="{{ work_category.data.id }}">
                    <div class="card-header">
                        <h4><input type="text" name="{{ work_category.title.name }}" value="{{ work_category.title.data }}"></h4>
                    </div>
                    <div class="card-body">
                        <div>
                            <div class="input-group m-1 mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">Default</span>
                                </div>
                                <input type="number" class="form-control" min="0" name="{{ work_category.default.name }}"
                                       value="{{ work_category.default.data }}">
                            </div>
                            <div class="input-group m-1 mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">Holiday</span>
                                </div>
                                <input type="number" class="form-control" min="0" name="{{ work_category.holiday.name }}"
                                       value="{{ work_category.holiday.data }}">
                            </div>
                        </div>
                        <div class="m-1 mb-3 custom-control custom-checkbox">
                            <input type="checkbox" class="custom-control-input" id="{{ work_category.rest_next_day.id }}"
                                   name="{{ work_category.rest_next_day.name }}" {% if work_category.rest_next_day.data %}checked{% endif %}>
                            <label class="custom-control-label" for="{{ work_category.rest_next_day.id }}">Rest Next Day</label>
                        </div>
                        <h5>Essential Skills</h5>
                        <div class="essential-skill drop-region droppable ml-1">
                            {% for skill in work_category.essential_skills %}
                                <span data-id="{{ skill.data.id }}" class="m-2 draggable">{{ skill.data.name }}</span>
                            {% endfor %}
                        </div>
                        <hr>
                        <button type="button" class="btn btn-danger btn-block">Remove</button>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="col-md-2">
            <ul class="selectable list-group">
                {% for skill in skills %}
                    <li data-id="{{ skill.id }}" class="list-group-item draggable">
                        {{ skill.name }}
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <hr>
    <div class="row m-1">
        <button name="store-options" type="button" class="btn btn-primary btn-block"
            data-action="{{ url_for('schedules.update_scheduler_option') }}"
            data-redirect="/schedules/show_scheduler">Scheduler</button>
    </div>
</form>
{% endblock %}

{% block css %}
<link rel='stylesheet' type="text/css" href="{{ url_for('static', filename='css/tempusdominus-bootstrap-4.css') }}" />
<link rel='stylesheet' type="text/css" href="{{ url_for('static', filename='css/scheduler_option.css') }}" />
{% endblock %}

{% block script %}
<script type="text/javascript" src="{{ url_for('static', filename='js/moment.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/tempusdominus-bootstrap-4.js') }}"></script>
<script type="module" src="{{ url_for('static', filename='js/scheduler_option.js') }}"></script>
{% endblock %}